# 三、记事本项目

```table-of-contents
```
## 3.1 项目概述

### 3.1.1 功能介绍

1. 支持文本创建、打开、保存、关闭功能。
2. UI 样式美化。
3. 打开、保存快捷键。
4. 底部显示行列号及文本字符编码。
5. 支持字体放大缩小（ `Ctrl` 加鼠标滚轮）。

### 3.1.2 工程概述

1.  `QApplication` 是 Qt 应用程序的核心，它为应用程序提供了必要的环境和框架，确保 GUI 组件能够正常工作并响应用户的操作。简而言之， `QApplication a (argc, argv);` 用于初始化 Qt 应用程序的环境，设置事件循环，并准备应用程序处理 GUI 事件。
2. `Q_OBJECT` 宏是Qt框架中一个非常重要的宏，用于启用Qt对象的元对象系统。当你在Qt中定义一个类时，如果这个类继承自 `QObject` 或其子类，并且你想使用Qt的信号和槽机制、国际化、属性系统或其他 Qt元对象系统提供的功能，就必须在类定义中包含 `Q_OBJECT` 宏。这个宏允许Qt的元对象编译器（moc）识别并处理这个类，生成额外的代码，这些代码是实现信号和槽机制以及其他元对象功能所必需的。简单地说， Q_OBJECT 宏为Qt类提供了额外的元数据，使得类能够完全利用Qt框架的功能。

## 3.2 信号与槽

### 3.2.1 信号与槽基本介绍

**信号与槽**机制是一种非常强大的事件通信机制。

1. **信号（Signals）**：由对象在特定事件发出的消息。
2. **槽（Slots）**：用来响应信号的方法。一个槽可以是任何函数，当其关联的信号被发出时，该槽函数将被调用。
3. **连接信号与槽**：使用 `QObject::connect()` 方法将信号连接到槽。当信号发出时，关联的槽函数会自动执行。

### 3.2.2 QPushButton 设置信号与槽

存在几种方式设置信号与槽：

|           连接方式            |                          描述                          |                                    示例                                    |
| :-----------------------: | :--------------------------------------------------: | :----------------------------------------------------------------------: |
| ​**使用 QObject::connect**​ |       最常用的方式，直接通过 `QObject::connect` 函数连接信号和槽        |  `QObject::connect(sender, SIGNAL(signal()), receiver, SLOT(slot()));`   |
| ​**使用 C++11 Lambda 表达式**​ |        利用 C++11 的 Lambda 表达式在连接点使用匿名函数，使代码更简洁        | `QObject::connect(sender, &Sender::signal, [=]() { /* Lambda 函数体 */ });` |
|       ​**使用函数指针**​        | Qt 5 引入的类型安全方式，允许直接通过函数指针连接信号和槽，**支持 IDE 代码补全和错误检查** | `QObject::connect(sender, &Sender::signal, receiver, &Receiver::slot);`  |
|   ​**自动连接（使用 UI 文件）​**​   |   在 Qt Designer 中通过命名约定自动连接（格式： `on_<对象名>_<信号名>` ）   |           定义槽函数： `void on_pushButton_clicked();` （自动连接按钮点击信号）            |

### 3.2.3 自定义信号与槽

1. **定义信号**：信号由 `signals` 关键字声明的类成员函数，不需要实现。
2. **定义槽**：槽可以是任何普通函数，但通常在类定义中用 `slots` 关键字标注。槽可以由返回类型，也可以接受参数，但是**其参数类型必须与发出信号的参数类型匹配**。
3. **发送信号**：使用 `emit` 关键字发射信号。当信号被发射时，所有连接到这个信号的槽都会被调用。

> Qt 中允许信号与槽参数不匹配，但是最好不要这么做！

## 3.3 QFile

提供读取和写入文件功能，支持文本和二进制文件。

`QFile` 继承自 `QIODevice` ，因此它可以像其他 IO 设备一样使用。

**主要功能**
1. 文件读取
2. 文件信息
3. 文件操作
4. 错误处理

### 3.3.1 QTextStream

**特性**
1. 字符编码：支持 Unicode、可以处理不同编码。
2. 读写文本
3. 格式化
4. 流操作符
5. 换行处理：不同能够操作系统间的换行符差异。
6. 缓冲机制
7. 字符串操作

## 3.4 QFileDialog

文件选择对话框。

**特性**
1. 模式选择：打开、保存文件等。
2. 过滤器设置：限制用户可以选择的文件类型。
3. 显示对话框。

|     编码名称     |                                                             描述                                                             |
| :----------: | :------------------------------------------------------------------------------------------------------------------------: |
|    UTF-8     |                                            用于表示 Unicode 文本的变长字符编码，广泛用于网络和多语言文本                                             |
|    UTF-16    |                                                   用于表示 Unicode 文本的定长字符编码                                                   |
|  ISO 8859-1  |                                                   也称为 Latin1，用于表示西欧语言字符                                                    |
|     GBK      |                                                  用于表示简体中文字符，是 GB2312 的扩展                                                   |
|     Big5     |                                                   用于表示繁体中文字符，常用于台湾和香港地区                                                    |
| Windows-1252 |                                                用于表示西欧语言字符，是 ISO 8859-1 的超集                                                 |
|     ANSI     | 在 Qt 中，"ANSI" 编码并不是一个明确指定的编码标准。ANSI 编码的指向取决于操作系统的语言和区域设置：中文 Windows 系统通常指 GBK，西欧语言 Windows 系统可能指 ISO 8859-1 或 Windows-1252 |
## 3.5 QComboBox

下拉列表控件。

